<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Check-in — Desafio 40+</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --muted:#a7b6d0;
      --ok:#16a34a;
      --err:#dc2626;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:linear-gradient(180deg,#0e2345,#0a1a33);
      color:#e6efff;
      font-family:Poppins,Arial,Helvetica,sans-serif
    }
    header{
      padding:16px;
      text-align:center;
      background:#0e2345;
      box-shadow:0 2px 8px rgba(0,0,0,.25)
    }
    .wrap{
      max-width:760px;
      margin:24px auto;
      padding:0 14px
    }
    .card{
      background:#255,255,255,0.05;
      border-radius:14px;
      padding:18px;
      box-shadow:0 6px 16px rgba(0,0,0,.12)
    }
    h1{margin:0 0 8px;color:var(--muted)}
    label{display:block;font-size:14px;color:#b0c4ff;margin:10px 0 6px}
    input,select{
      width:100%;
      padding:12px;
      border:1px solid #2947ad;
      background:#0d2144;
      color:#e6efff;
      border-radius:12px;
      margin-bottom:14px;
      font-size:14px;
    }
    button{
      background:linear-gradient(180deg,#3d66ff,#224ad6);
      color:#fff;
      border:0;
      border-radius:12px;
      padding:14px;
      cursor:pointer;
      font-size:15px;
      font-weight:bold;
      width:100%
    }
    button:hover{opacity:0.9}
    small{font-size:12px;line-height:1.4}
    a{color:#6da4ff;text-decoration:none}
  </style>
</head>
<body>
  <header>
    <h2>Check-in — Desafio 40+</h2>
  </header>
  <div class="wrap">
    <div class="card">
      <h1>Fez o treino de hoje?</h1>
      <p>
        Este check-in só deve ser feito se você realmente realizou o treino de hoje.  
        Para contar no ranking, informe o <b>código da aula</b> (enviado no grupo).  
      </p>

      <form id="checkinForm" enctype="multipart/form-data">
        <!-- Seleção do nome -->
        <label for="nome">Selecione seu nome (igual ao ranking):</label>
        <select id="nome" name="nome" required>
          <option value="">Carregando nomes...</option>
        </select>

        <!-- Código do treino -->
        <label for="codigo">Código do treino:</label>
        <input type="text" id="codigo" name="codigo" placeholder="Ex.: AG18" required />

        <!-- Upload de foto/vídeo -->
        <label for="arquivo">
          Foto ou vídeo do treino (máx. 10 MB)  
          <br>
          <small style="color:#FFD700; font-weight:bold;">
            ➜ Enviando foto/vídeo da aula de hoje (mostrando você e a TV com a aula), você ganha +5 pontos.  
            Atenção: usar imagens de outras aulas pode acarretar em perda de pontos.
          </small>
        </label>
        <input type="file" id="arquivo" name="arquivo" accept="image/*,video/*" />

        <!-- Botão -->
        <button type="submit">Fazer check-in</button>
      </form>

      <p style="margin-top:16px">
        <a href="index.html">← Voltar ao ranking</a>
      </p>
    </div>
  </div>

  <script>
    // Buscar os nomes direto do ranking (sample_data.json ou Firestore)
    async function carregarNomes() {
      try {
        // Caminho do JSON do ranking (ajuste se o nome estiver em outro arquivo)
        const resposta = await fetch("sample_data.json");
        const dados = await resposta.json();

        const select = document.getElementById("nome");
        select.innerHTML = "<option value=''>-- Escolha seu nome --</option>";

        // Supondo que o JSON tenha formato { "usuarios": [ { "nome": "Paula Silva", "pontos": 10 } ] }
        if (dados.usuarios && Array.isArray(dados.usuarios)) {
          dados.usuarios.forEach(usuario => {
            const opt = document.createElement("option");
            opt.value = usuario.nome;
            opt.textContent = usuario.nome;
            select.appendChild(opt);
          });
        } else {
          // Se não houver nomes, mostra erro
          select.innerHTML = "<option value=''>Nenhum nome encontrado</option>";
        }

      } catch (erro) {
        console.error("Erro ao carregar nomes:", erro);
        document.getElementById("nome").innerHTML =
          "<option value=''>Erro ao carregar nomes</option>";
      }
    }

    // Executa quando a página abrir
    carregarNomes();
  </script>
</body>
</html>
