<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Admin — Desafio 40+</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    body{background:#001a35;color:#fff;font-family:sans-serif;margin:0;padding:30px;}
    h2{color:#ffd700;}
    #erros{background:#330000;color:#ffcfcf;padding:10px;margin:15px 0;border-radius:10px;}
    #alunas{background:#112244;padding:10px;border-radius:8px;}
    button{padding:8px 16px;border-radius:8px;border:none;background:#2a6af7;color:#fff;}
    input{padding:8px;border-radius:8px;}
  </style>
</head>
<body>
  <h2>Admin — Desafio 40+</h2>
  <div id="erros"></div>
  <div>
    <h3>Adicionar aluna</h3>
    <input id="nomeAluna" placeholder="Nome da aluna" />
    <button onclick="addAluna()">Adicionar</button>
  </div>
  <div>
    <h3>Lista de alunas</h3>
    <div id="alunas">Carregando...</div>
  </div>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAMf0Z5_a1DufNRCTHGPGC6ZBE9T2-tYAU",
      authDomain: "clube-aguiar-live.firebaseapp.com",
      projectId: "clube-aguiar-live",
      storageBucket: "clube-aguiar-live.firebasestorage.app",
      messagingSenderId: "694025911850",
      appId: "1:694025911850:web:5f0c6117dbc60b15118d53"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function logErro(msg) {
      document.getElementById("erros").textContent = msg;
    }

    async function carregarAlunas() {
      try {
        const snap = await db.collection("usuarios").orderBy("nome").get();
        if (snap.empty) {
          document.getElementById("alunas").innerHTML = "Nenhuma aluna cadastrada.";
          return;
        }
        let html = "";
        snap.forEach(doc => {
          const d = doc.data();
          html += `<div><b>${d.nome}</b> — ${d.pontos ?? 0} pts</div>`;
        });
        document.getElementById("alunas").innerHTML = html;
      } catch(e) {
        logErro("ERRO ao carregar alunas: " + e.message);
      }
    }
    carregarAlunas();

    async function addAluna() {
      const nome = document.getElementById("nomeAluna").value.trim();
      if (!nome) return;
      try {
        await db.collection("usuarios").add({ nome, pontos: 0 });
        carregarAlunas();
      } catch(e) {
        logErro("ERRO ao adicionar aluna: " + e.message);
      }
    }
  </script>
</body>
</html>
